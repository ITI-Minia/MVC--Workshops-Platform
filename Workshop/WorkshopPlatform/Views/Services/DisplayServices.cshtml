@model Workshop.ViewModel.ServicesViewModel

@{
    ViewData["Title"] = "DisplayServices";
    Layout = "~/Views/Shared/_Layout1.cshtml";
}




<!-- Page Wrapper -->
<div id="wrapper">


    <!-- Content Wrapper -->
    <div id="content-wrapper" class="d-flex flex-column">

        <!-- Main Content -->
        <div id="content">
            <!-- Begin Page Content -->
            <div class="container-fluid">
                @{ if (TempData["Done"] != null)
                    {
                        <div class="alert alert-primary alert-dismissible">
                            <button type="button" class="close" data-dismiss="alert">&times;</button>
                            @TempData["Done"]
                        </div>
                    }

                }
                <!-- DataTales Example -->
                <div class="card shadow mb-4">
                    <div class="card-header py-3">

                        <br />
                        <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#myModal">
                            <i class="fa fa-plus-circle" style="color: #F4F4F4"></i> Create New Service
                        </button>

                    </div>
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table table-bordered" id="mytable" width="100%" cellspacing="0">
                                <thead>
                                    <tr>
                                        <th>Title</th>
                                        <th>Price</th>
                                        <th>Description</th>
                                        <th>Image</th>
                                        <th>Edit</th>
                                        <th>Delete</th>
                                    </tr>
                                </thead>

                                <tbody>
                                    @foreach (var item in ViewBag.services)
                                    {
                                        <tr>
                                            <td>
                                                @item.Title
                                            </td>
                                            <td>
                                                @item.Price
                                            </td>
                                            <td>
                                                @item.Description
                                            </td>

                                            <td>
                                                <img src="~/imgs/@item.Image" style="width:124px;height:80px" class="img-thumbnail" />

                                            </td>

                                            <td>
                                                <a class="btn btn-primary " onclick="update(@item.Id)" style="color:white">
                                                    <i class="fas fa-edit"></i>
                                                    @*update*@
                                                </a>


                                            <td>
                                                <a class="btn btn-danger" onclick="Delete(@item.Id)" style="color:white;">
                                                    <i class="fas fa-trash-alt"></i>


                                                </a>
                                            </td>

                                        </tr>
                                    }
                                </tbody>
                            </table>
                            <div class="pagination-container">
                                <nav>
                                    <ul class="pagination"></ul>
                                </nav>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
            <!-- /.container-fluid -->

        </div>
        <!-- End of Main Content -->



    </div>
    <!-- End of Content Wrapper -->

</div>
<!-- End of Page Wrapper -->
<!-- Scroll to Top Button-->
<a class="scroll-to-top rounded" href="#page-top">
    <i class="fas fa-angle-up"></i>
</a>

<!-- Logout Modal-->
@*<div class="modal fade" id="logoutModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Ready to Leave?</h5>
                <button class="close" type="button" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">×</span>
                </button>
            </div>
            <div class="modal-body">Select "Logout" below if you are ready to end your current session.</div>
            <div class="modal-footer">
                <button class="btn btn-secondary" type="button" data-dismiss="modal">Cancel</button>
                <a class="btn btn-primary" href="login.html">Logout</a>
            </div>
        </div>
    </div>
</div>*@




@*update*@

<div class="modal fade updateModal" id="myUpdateModal">
    <div class="modal-dialog">
        <div class="modal-content">

            @*Modal Header*@
            <div class="modal-header">
                <h4 class="modal-title">Update Service</h4>
                <button type="button" class="close" data-dismiss="modal">&times;</button>
            </div>

            @*Modal body*@
            <div class="modal-body">
                <form asp-action="Edit" enctype="multipart/form-data">
                    <div asp-validation-summary="ModelOnly" class="text-danger"></div>
                    <input type="hidden" asp-for="Id" />

                    <div class="form-group">
                        <label asp-for="Title" class="control-label"></label>
                        <input asp-for="Title" class="form-control" />
                        <span asp-validation-for="Title" class="text-danger"></span>
                    </div>
                    <div class="form-group">
                        <label asp-for="Price" class="control-label"></label>
                        <input asp-for="Price" class="form-control" />
                        <span asp-validation-for="Price" class="text-danger"></span>
                    </div>
                    <div class="form-group">
                        <label asp-for="Description" class="control-label"></label>
                        <input asp-for="Description" class="form-control" />
                        <span asp-validation-for="Description" class="text-danger"></span>
                    </div>

                    <div class="form-group ">
                        <label asp-for="Imagepath" class="control-label">Workshop Image</label>
                        <div class="custom-file">

                            <input asp-for="Imagepath" class="form-control custom-file-input" />
                            <label class="custom-file-label">Choose Image ...</label>
                        </div>

                    </div>
                    <div class="form-group">
                        <input type="submit" value="Update" class="btn btn-primary" />
                    </div>
                </form>
            </div>

        </div>
    </div>
</div>



@*Delete*@


<partial name="Delete.cshtml">


@*Create*@

<div class="modal fade" id="myModal">
        <div class="modal-dialog">
            <div class="modal-content">

                <div class="modal-header">
                    <h4 class="modal-title">create Service</h4>
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>

                <div class="modal-body">
                    <form asp-action="create"  enctype="multipart/form-data">
                        <div asp-validation-summary="ModelOnly" class="text-danger"></div>
                        <div class="form-group">
                            <label asp-for="Title" class="control-label"></label>
                            <input asp-for="Title" class="form-control" />
                            <span asp-validation-for="Title" class="text-danger"></span>
                        </div>
                        <div class="form-group">
                            <label asp-for="Price" class="control-label"></label>
                            <input asp-for="Price" class="form-control" />
                            <span asp-validation-for="Price" class="text-danger"></span>
                        </div>
                        <div class="form-group">
                            <label asp-for="Description" class="control-label"></label>
                            <input asp-for="Description" class="form-control" />
                            <span asp-validation-for="Description" class="text-danger"></span>
                        </div>

                            <div class="form-group ">
                                <label asp-for="Image" class="control-label"></label>
                                <div class="custom-file">

                                    <input asp-for="Imagepath" class="form-control custom-file-input" />
                                    <label class="custom-file-label">Choose Image ...</label>
                                </div>

                            </div>

                        <br />
                        <br />
                        <div class="form-group">
                            <input type="submit" value="Create" class="btn btn-primary" />
                        </div>
                    </form>
                </div>

            </div>
        </div>
    </div>


@section Scripts {
    <script>
 
        function update(id) {
            //var ide = id;

            $.ajax({
                type: "Get",
                url: "/Services/Edit",
                data: { id },
                dataType: "html",
                success: function (res) {
                    //var qqq = $(this).closest('.modal');
                    $("#myUpdateModal").html(res);
                    //$(".modal").modal();
                    $(".updateModal").modal("show");
                }
               
            });
        }
        function Delete(id) {
            //var ide = id;

            $.ajax({
                type: "Get",
                url: "/Services/Delete",
                data: { id },
                dataType: "html",
                success: function (res) {
                    console.log(id);
                    $("#myDeleteModal").html(res);
                    $(".delete").modal("show");
                },
                error: function (err) {
                    console.log(err);
                }
            });
        }
    </script>
}